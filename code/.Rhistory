f = read.csv("new.csv")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
x = f[15:41]
colnames(x)
pca = prcomp(x)
View(pca)
m = cbind(m,pp[1:3])
m = cbind(f[0:10],f[42:44])
m = cbind(m,f[46:46])
m = cbind(m,pp[1:3])
m = cbind(m,f[47:47])
write.csv(m,file = "new_full_tree.csv")
f = read.csv("new.csv")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
x = f[15:41]
colnames(x)
pca = prcomp(x)
View(pca)
pp = data.frame(pca$x)
m = cbind(f[0:10],f[42:44])
m = cbind(m,f[46:46])
m = cbind(m,pp[1:3])
m = cbind(m,f[47:47])
write.csv(m,file = "new_full_tree.csv")
r = read.csv("new_full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
r = read.csv("new_full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
r = read.csv("new_full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
r = read.csv("new_full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
f = read.csv("new.csv")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
x = f[15:41]
colnames(x)
pca = prcomp(x)
View(pca)
pp = data.frame(pca$x)
m = cbind(f[0:10],f[42:44])
m = cbind(m,f[46:46])
m = cbind(m,pp[1:3])
m = cbind(m,f[47:47])
write.csv(m,file = "new_full_tree.csv")
r = read.csv("new_full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
SMILE   = "[H][C@@]12C[C@@H](C)[C@](O)(C(=O)CO)[C@@]1(C)C[C@H](O)[C@@]1(F)[C@@]2([H])CCC2=CC(=O)C=C[C@]12C"
targets = c("NR3C1","NR0B1","ANXA1","NOS2")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
featureset=getAllFeatures(SMILE,targets)
prob = 1 - predict(rf2,featureset[!names(featureset) %in% c("Ro5","Ghose","Veber")],"prob")[1]
list(pred=c("Safe","Toxic")[as.numeric(prob<0.5)+1],prob=prob,score=log2(prob/(1-prob)))
PrOCTOR(SMILE="[H][C@@]12C[C@@H](C)[C@](O)(C(=O)CO)[C@@]1(C)C[C@H](O)[C@@]1(F)[C@@]2([H])CCC2=CC(=O)C=C[C@]12C",targets=c("NR3C1","NR0B1","ANXA1","NOS2"))
write.csv(m,file="new_forest_input_to_py.csv")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
f = read.csv("input.csv")
f = read.csv("input.csv")
x = f[15:41]
colnames(x)
pca = prcomp(x)
View(pca)
pp = data.frame(pca$x)
m = cbind(f[0:10],f[42:44])
m = cbind(m,f[46:46])
m = cbind(m,pp[1:3])
m = cbind(m,f[47:47])
write.csv(m,file = "full_tree.csv")
r = read.csv("full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
SMILE   = "[H][C@@]12C[C@@H](C)[C@](O)(C(=O)CO)[C@@]1(C)C[C@H](O)[C@@]1(F)[C@@]2([H])CCC2=CC(=O)C=C[C@]12C"
targets = c("NR3C1","NR0B1","ANXA1","NOS2")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
featureset=getAllFeatures(SMILE,targets)
prob = 1 - predict(rf2,featureset[!names(featureset) %in% c("Ro5","Ghose","Veber")],"prob")[1]
list(pred=c("Safe","Toxic")[as.numeric(prob<0.5)+1],prob=prob,score=log2(prob/(1-prob)))
PrOCTOR(SMILE="[H][C@@]12C[C@@H](C)[C@](O)(C(=O)CO)[C@@]1(C)C[C@H](O)[C@@]1(F)[C@@]2([H])CCC2=CC(=O)C=C[C@]12C",targets=c("NR3C1","NR0B1","ANXA1","NOS2"))
write.csv(m,file="forest_input_to_py.csv")
f = read.csv("input.csv")
x = f[15:41]
colnames(x)
pca = prcomp(x)
View(pca)
pp = data.frame(pca$x)
m = cbind(f[0:10],f[42:44])
m = cbind(m,f[46:46])
m = cbind(m,pp[1:3])
m = cbind(m,f[47:47])
write.csv(m,file = "full_tree.csv")
r = read.csv("full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
write.csv(m,file="forest_input_to_py.csv")
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
View(data)
data[["tree"]][["full"]][[1]][["predicted"]][["Estrone:309"]]
data[["tree"]][["full"]][[1]][["predicted"]][["Oxaprozin:480"]]
r = read.csv("full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
source('~/Final Year Project/proctor/PrOCTOR/R/PrOCTOR.R')
r = read.csv("full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
r = read.csv("full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
r = read.csv("full_tree.csv")
mrow = data.frame(make.names(r[2]$X,unique = TRUE))
m=r[3:19]
row.names(m) <-(t(mrow))
X = m[1:16]
(rf2 <- randomForest(x = X, y= factor(t(m[17])),type = "classification"))
source('~/Final Year Project/proctor/PrOCTOR/R/new/PrOCTOR.R')
